# Generated by Ansible for {{ ansible_hostname  }}.{{ network.domain }}

FQDNLookup      true
Interval        120

LoadPlugin      syslog
LoadPlugin unixsock
LoadPlugin      df
LoadPlugin      interface
LoadPlugin      hddtemp
LoadPlugin      network
LoadPlugin      exec
# LoadPlugin      ipmi

<Plugin syslog>
    LogLevel    info
</Plugin>

<Plugin unixsock>
  SocketFile    "/var/run/collectd-unixsock"
  SocketGroup   "root"
  SocketPerms   "0770"
  DeleteSocket  true
</Plugin>

<Plugin df>
    MountPoint "/storage/"
    IgnoreSelected false
</Plugin>

<Plugin interface>
    Interface "lo"
    IgnoreSelected true
</Plugin>

<Plugin hddtemp>
    Host "127.0.0.1"
    Port "7634"
</Plugin>

# <Plugin "ipmi">
# {% for sensor in ipmi[ansible_hostname] %}
#     Sensor "{{ sensor }}"
#     IgnoreSelected false
# {% endfor %}
# </Plugin>

<Plugin network>
    Server "{{ network.influxdb }}" "25826"
</Plugin>

# ansible_ssh_user は zpool コマンドをパスワード無しで sudo できる前提．
# 詳細はスクリプト参照．
<plugin exec>
    Exec "{{ lookup('env','USER') }}:sudo" "/usr/lib/collectd/zpool_df.py"
</plugin>

# Local Variables:
# mode: conf
# End:
################################################################################
