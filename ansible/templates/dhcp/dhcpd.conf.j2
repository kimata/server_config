# Generated by Ansible for {{ ansible_hostname  }}.{{ network.domain }}

local-address       {{ network.dhcp }};

option              time-offset 32400;

option              tz-posix-string code 100 = string;
option              tz-posix-string "JST-9";

default-lease-time  3600;
max-lease-time      10800;

ddns-updates        on;
ddns-update-style   interim;
update-static-leases on;
use-host-decl-names on;
ignore              client-updates; 

zone {{ network.domain }}. {
    primary         {{ network.dns }};
}

zone {{ network.zone }}.in-addr.arpa. {
    primary         {{ network.dns }};
}

subnet {{ network.subnet }} netmask {{ network.netmask }} {
    authoritative;     
    range           {{ network.lease_start }} {{ network.lease_end }};

    option          domain-name "{{ network.domain }}";
    option          domain-name-servers {{ network.dns }};

    option          ntp-servers {{ network.ntp }};

    option          routers {{ network.gateway }};
    option          subnet-mask {{ network.netmask }};
    option          broadcast-address {{ network.broadcast }};
}

{% for host in device %}
host {{ host.name }} {
   hardware         ethernet {{ host.mac }};
   fixed-address    {{ host.addr }};
   ddns-hostname    "{{ host.name }}";
}
{% endfor %}

